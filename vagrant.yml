---
- hosts: all
  roles:
    - johncming.emacs
    - johncming.go

- hosts: all
  tasks:
    - command: go get -u github.com/hashicorp/terraform
      environment:
        GOPATH: "{{ ansible_user_dir }}/.go"
        PATH: "{{ ansible_env.PATH }}:/usr/local/go/bin"
      ignore_errors: yes
    - blockinfile:
        path: "{{ ansible_user_dir }}/.terraformrc"
        block: |
          providers {
              mydns = "/vagrant/mydns"
          }
